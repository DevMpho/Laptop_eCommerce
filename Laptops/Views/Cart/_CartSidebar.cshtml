@model List<Laptops.Models.cart_items>

@{
    decimal totalPrice = 0;
    int totalItems = Model?.Count ?? 0;
}

@if (Model != null && Model.Count > 0)
{
    <div class="p-4 space-y-4">
        <h2 class="text-lg font-semibold mb-4">You have (@totalItems items) in your cart</h2>

        @foreach (var item in Model)
        {
            if (item.Laptop != null && item.Laptop.LaptopDetails != null)
            {
                totalPrice += item.Laptop.price;

                <div class="flex items-center justify-between bg-white rounded-lg shadow p-2">
                    <div class="flex items-center space-x-4">
                        <img src="@Url.Content("~/" + item.Laptop.imgUrl)" alt="Laptop Image" class="w-16 h-16 object-cover rounded" />
                        <div>
                            <div class="font-semibold text-gray-800">@item.Laptop.LaptopDetails.brand @item.Laptop.LaptopDetails.model</div>
                            <div class="text-sm text-gray-500">
                                @item.Laptop.LaptopDetails.storage GB / @item.Laptop.LaptopDetails.ram GB
                            </div>
                            <div class="text-sm font-bold text-green-600">R @item.Laptop.price</div>
                        </div>
                    </div>

                    <form method="post" asp-action="RemoveFromCart" asp-route-id="@item.cartitems_id">
                        <button type="submit" title="Remove" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash-alt"></i> <!-- Font Awesome icon -->
                        </button>
                    </form>
                </div>
            }
        }

        <div class="border-t pt-4 mt-4 text-right">
            <div class="text-sm text-gray-600">Total:</div>
            <div class="text-lg font-bold text-green-700">R @totalPrice</div>
        </div>
    </div>
}
else
{
    <p class="text-gray-500 p-4">Your cart is empty.</p>
}
